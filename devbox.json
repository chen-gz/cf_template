{
  "name": "cpp-devbox",
  "version": "1.0.0",
  "description": "A full-featured C++ development environment with GCC and CMake",
  "packages": [
    "nixpkgs#gcc",
    "nixpkgs#cmake",
    "nixpkgs#fish",
    "nixpkgs#clang"   
  ],
  "shell": {
    "init": [
      "# Automatically switch to fish shell if not already in it",
      "if [ \"$(basename $(ps -o comm= -p $$))\" != \"fish\" ]; then exec fish; fi",
      "",
      "# Export environment variables to force Devbox to use GCC",
      "export CC=$(which gcc)",
      "export CXX=$(which g++)",
      "export PATH=$PATH:$(dirname $(which gcc))"
    ]
  },
  "platforms": [
    "x86_64-linux",
    "aarch64-linux",
    "x86_64-darwin",
    "aarch64-darwin"
  ],
  "build": {
    "cmake": {
      "generator": "Ninja", 
      "options": [
        "-DCMAKE_C_COMPILER=$CC",
        "-DCMAKE_CXX_COMPILER=$CXX",
        "-DCMAKE_BUILD_TYPE=Debug"
      ]
    }
  }
}
